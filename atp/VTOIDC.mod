MODEL VTOIDC -- 6 character name limit
INPUT i1
OUTPUT o1,o2,o3
VAR o1,o2,o3
  F1_w1[1..20] -- weighted inputs
  F1_b1[1..20] -- biased inputs
  F1_th[1..20] -- activation functions
  F1_w2[1..20] -- weighted outputs
  F2_w1[1..20] -- weighted inputs
  F2_b1[1..20] -- biased inputs
  F2_th[1..20] -- activation functions
  F2_w2[1..20] -- weighted outputs
CONST
  F1_n0b[1..20] {val:[0.88121,
      0.46373,
      0.82106,
      0.27555,
      0.59286,
      -0.90270,
      -0.19635,
      -0.00777,
      -0.42517,
      0.12910,
      0.82826,
      -0.74490,
      -0.36687,
      -0.35776,
      0.72386,
      -0.77392,
      1.13628,
      -0.70778,
      -0.23402,
      -0.23197]}
  F1_n0w[1..20] {val:[-0.93730,
      -0.35704,
      1.42831,
      -0.45430,
      0.46716,
      0.68718,
      0.25083,
      -0.41331,
      0.14772,
      0.48083,
      -0.75432,
      0.61109,
      -0.46677,
      0.26799,
      0.94003,
      -0.38461,
      -1.17605,
      0.68720,
      0.42318,
      0.46681]}
  F1_n2b {val:0.18594}
  F1_n2w[1..20] {val:[0.10335,
      0.27283,
      -0.21304,
      0.13856,
      -0.17990,
      -0.07355,
      -0.13065,
      0.09914,
      -0.01087,
      -0.30001,
      0.13840,
      -0.05362,
      0.17036,
      -0.14893,
      -0.14751,
      0.06880,
      0.04644,
      -0.16733,
      -0.14013,
      -0.23396]}
  G1_a[1..9] {val:[1.00000,
      0.09793,
      0.07988,
      0.04443,
      0.03976,
      0.03548,
      0.01600,
      0.00541,
      -0.00101]}
  G1_b[1..8] {val:[-0.44357,
      -0.14877,
      -0.04555,
      -0.02812,
      -0.02229,
      -0.01992,
      -0.01081,
      -0.00409]}
  F2_n0b[1..20] {val:[-0.49592,
      0.67816,
      0.64027,
      0.34741,
      1.10687,
      0.13039,
      -0.12969,
      -0.62637,
      -0.33059,
      0.38747,
      -0.73837,
      0.36481,
      -0.20658,
      -0.75765,
      -0.06020,
      -0.41927,
      0.94023,
      -0.46323,
      0.93759,
      0.57841]}
  F2_n0w[1..20] {val:[0.12628,
      0.81854,
      0.81373,
      -0.71861,
      -0.35159,
      0.09382,
      -0.59872,
      1.36600,
      0.96290,
      0.61396,
      -0.51952,
      -1.11354,
      0.46585,
      -0.01829,
      0.39096,
      -0.60756,
      0.39280,
      1.09738,
      0.92736,
      0.70083]}
  F2_n2b {val:0.00672}
  F2_n2w[1..20] {val:[0.14752,
      0.12070,
      0.11319,
      -0.26569,
      0.08502,
      0.09140,
      -0.29439,
      0.06305,
      0.13319,
      0.27524,
      -0.21721,
      -0.17108,
      0.09114,
      0.01936,
      0.33660,
      -0.34361,
      0.11187,
      0.14180,
      0.01464,
      0.08723]}
HISTORY o2 {dflt:0}
INIT
  F1_w1[1..20] := 0
  F1_b1[1..20] := 0
  F1_th[1..20] := 0
  F1_w2[1..20] := 0
  F2_w1[1..20] := 0
  F2_b1[1..20] := 0
  F2_th[1..20] := 0
  F2_w2[1..20] := 0
  o1 := 0
  o3 := 0
ENDINIT
EXEC
-- F1 block
  F1_w1[1..20] := i1 * F1_n0w[1..20]
  F1_b1[1..20] := F1_w1[1..20] + F1_n0b[1..20]
  F1_th[1..20] := tanh(F1_b1[1..20])
  FOR i:=1 to 20 DO F1_w2[i] := F1_th[i] * F1_n2w[i] ENDFOR
  o1 := F1_n2b
  FOR i:=1 to 20 DO o1 := o1 + F1_w2[i] ENDFOR
-- G1 block
  czfun(o2/o1) :=
 (G1_b[1]|z0+
      G1_b[2]|z-1+
      G1_b[3]|z-2+
      G1_b[4]|z-3+
      G1_b[5]|z-4+
      G1_b[6]|z-5+
      G1_b[7]|z-6+
      G1_b[8]|z-7)
  /
 (G1_a[1]|z0+
      G1_a[2]|z-1+
      G1_a[3]|z-2+
      G1_a[4]|z-3+
      G1_a[5]|z-4+
      G1_a[6]|z-5+
      G1_a[7]|z-6+
      G1_a[8]|z-7+
      G1_a[9]|z-8)
-- F2 block
  F2_w1[1..20] := o2 * F2_n0w[1..20]
  F2_b1[1..20] := F2_w1[1..20] + F2_n0b[1..20]
  F2_th[1..20] := tanh(F2_b1[1..20])
  FOR i:=1 to 20 DO F2_w2[i] := F2_th[i] * F2_n2w[i] ENDFOR
  o3 := F2_n2b
  FOR i:=1 to 20 DO o3 := o3 + F2_w2[i] ENDFOR
ENDEXEC
ENDMODEL
