MODEL VTOQAC -- 6 character name limit
INPUT i1
OUTPUT o1,o2,o3
VAR o1,o2,o3
  F1_w1[1..20] -- weighted inputs
  F1_b1[1..20] -- biased inputs
  F1_th[1..20] -- activation functions
  F1_w2[1..20] -- weighted outputs
  F2_w1[1..20] -- weighted inputs
  F2_b1[1..20] -- biased inputs
  F2_th[1..20] -- activation functions
  F2_w2[1..20] -- weighted outputs
CONST
  F1_n0b[1..20] {val:[0.68568,
      0.47361,
      0.83070,
      0.10805,
      0.66940,
      -0.76526,
      -0.08575,
      -0.12261,
      -0.40237,
      0.30088,
      0.64798,
      -0.58677,
      -0.40070,
      -0.34018,
      0.74389,
      -0.78539,
      0.98108,
      -0.51265,
      -0.09430,
      -0.05401]}
  F1_n0w[1..20] {val:[-0.72641,
      0.27895,
      1.66855,
      -0.43622,
      -0.11131,
      0.64010,
      0.31403,
      -0.47422,
      0.33209,
      0.58978,
      -0.58723,
      0.58324,
      -0.54570,
      -0.32851,
      1.13917,
      0.27408,
      -1.21529,
      0.51869,
      0.42487,
      0.40476]}
  F1_n2b {val:0.18469}
  F1_n2w[1..20] {val:[-0.28439,
      0.21141,
      0.19621,
      -0.26733,
      -0.06113,
      0.17888,
      0.27489,
      -0.23234,
      0.19729,
      0.00828,
      -0.18954,
      0.28858,
      -0.16788,
      -0.18076,
      0.14886,
      0.05756,
      -0.32898,
      0.20244,
      0.28781,
      0.16009]}
  G1_a[1..9] {val:[1.00000,
      0.09731,
      0.00413,
      -0.01276,
      -0.01465,
      0.03762,
      0.01571,
      0.00905,
      -0.00014]}
  G1_b[1..8] {val:[0.38548,
      0.04217,
      0.00255,
      -0.00486,
      -0.00569,
      0.01445,
      0.00627,
      0.00363]}
  F2_n0b[1..20] {val:[-0.50371,
      0.58217,
      0.55261,
      0.34148,
      1.10491,
      0.12510,
      -0.14012,
      -0.62030,
      -0.33332,
      0.36203,
      -0.73332,
      0.27607,
      -0.20546,
      -0.75883,
      -0.06365,
      -0.39450,
      0.94570,
      -0.44025,
      0.86673,
      0.56084]}
  F2_n0w[1..20] {val:[-0.03533,
      0.79487,
      0.84208,
      -0.75738,
      -0.36219,
      -0.04235,
      -0.66609,
      1.59029,
      1.15705,
      0.62436,
      -0.32635,
      -1.14873,
      0.40720,
      -0.19734,
      0.31072,
      -0.59439,
      0.18376,
      1.11337,
      0.92276,
      0.69133]}
  F2_n2b {val:0.00470}
  F2_n2w[1..20] {val:[0.13924,
      0.11037,
      0.09942,
      -0.27812,
      0.08286,
      0.05782,
      -0.26728,
      0.09436,
      0.14220,
      0.26652,
      -0.20798,
      -0.16428,
      0.08757,
      0.01625,
      0.29598,
      -0.33546,
      0.10486,
      0.15744,
      0.00166,
      0.07827]}
HISTORY o2 {dflt:0}
INIT
  F1_w1[1..20] := 0
  F1_b1[1..20] := 0
  F1_th[1..20] := 0
  F1_w2[1..20] := 0
  F2_w1[1..20] := 0
  F2_b1[1..20] := 0
  F2_th[1..20] := 0
  F2_w2[1..20] := 0
  o1 := 0
  o3 := 0
ENDINIT
EXEC
-- F1 block
  F1_w1[1..20] := i1 * F1_n0w[1..20]
  F1_b1[1..20] := F1_w1[1..20] + F1_n0b[1..20]
  F1_th[1..20] := tanh(F1_b1[1..20])
  FOR i:=1 to 20 DO F1_w2[i] := F1_th[i] * F1_n2w[i] ENDFOR
  o1 := F1_n2b
  FOR i:=1 to 20 DO o1 := o1 + F1_w2[i] ENDFOR
-- G1 block
  czfun(o2/o1) :=
 (G1_b[1]|z0+
      G1_b[2]|z-1+
      G1_b[3]|z-2+
      G1_b[4]|z-3+
      G1_b[5]|z-4+
      G1_b[6]|z-5+
      G1_b[7]|z-6+
      G1_b[8]|z-7)
  /
 (G1_a[1]|z0+
      G1_a[2]|z-1+
      G1_a[3]|z-2+
      G1_a[4]|z-3+
      G1_a[5]|z-4+
      G1_a[6]|z-5+
      G1_a[7]|z-6+
      G1_a[8]|z-7+
      G1_a[9]|z-8)
-- F2 block
  F2_w1[1..20] := o2 * F2_n0w[1..20]
  F2_b1[1..20] := F2_w1[1..20] + F2_n0b[1..20]
  F2_th[1..20] := tanh(F2_b1[1..20])
  FOR i:=1 to 20 DO F2_w2[i] := F2_th[i] * F2_n2w[i] ENDFOR
  o3 := F2_n2b
  FOR i:=1 to 20 DO o3 := o3 + F2_w2[i] ENDFOR
ENDEXEC
ENDMODEL
