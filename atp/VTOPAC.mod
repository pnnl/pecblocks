MODEL VTOPAC -- 6 character name limit
INPUT i1
OUTPUT o1,o2,o3
VAR o1,o2,o3
  F1_w1[1..20] -- weighted inputs
  F1_b1[1..20] -- biased inputs
  F1_th[1..20] -- activation functions
  F1_w2[1..20] -- weighted outputs
  F2_w1[1..20] -- weighted inputs
  F2_b1[1..20] -- biased inputs
  F2_th[1..20] -- activation functions
  F2_w2[1..20] -- weighted outputs
CONST
  F1_n0b[1..20] {val:[0.68323,
      0.47411,
      0.82415,
      0.10859,
      0.66908,
      -0.76537,
      -0.08577,
      -0.11960,
      -0.40258,
      0.26521,
      0.64745,
      -0.58549,
      -0.40023,
      -0.34072,
      0.74549,
      -0.78539,
      0.97989,
      -0.51170,
      -0.09485,
      -0.05455]}
  F1_n0w[1..20] {val:[-0.71934,
      0.28245,
      1.65089,
      -0.43100,
      -0.11296,
      0.63910,
      0.31277,
      -0.46877,
      0.33083,
      0.56549,
      -0.58354,
      0.57776,
      -0.54426,
      -0.33013,
      1.14953,
      0.27462,
      -1.21391,
      0.51349,
      0.42007,
      0.40051]}
  F1_n2b {val:0.18487}
  F1_n2w[1..20] {val:[-0.28369,
      0.21114,
      0.19288,
      -0.26940,
      -0.06101,
      0.17722,
      0.27413,
      -0.23159,
      0.19524,
      0.00765,
      -0.18792,
      0.28772,
      -0.16724,
      -0.18008,
      0.14801,
      0.05705,
      -0.32712,
      0.20176,
      0.28949,
      0.16141]}
  G1_a[1..9] {val:[1.00000,
      0.09503,
      0.00446,
      -0.01272,
      -0.01457,
      0.03747,
      0.01570,
      0.00884,
      -0.00018]}
  G1_b[1..8] {val:[0.38566,
      0.04527,
      0.00249,
      -0.00480,
      -0.00565,
      0.01438,
      0.00641,
      0.00358]}
  F2_n0b[1..20] {val:[-0.50396,
      0.58048,
      0.55010,
      0.34184,
      1.10461,
      0.12490,
      -0.13977,
      -0.61925,
      -0.33124,
      0.36144,
      -0.73331,
      0.27288,
      -0.20603,
      -0.75973,
      -0.06420,
      -0.39399,
      0.94525,
      -0.43994,
      0.81554,
      0.55985]}
  F2_n0w[1..20] {val:[-0.03475,
      0.79580,
      0.84385,
      -0.75929,
      -0.35871,
      -0.04086,
      -0.66763,
      1.59012,
      1.15950,
      0.62490,
      -0.32553,
      -1.15073,
      0.40593,
      -0.19539,
      0.31035,
      -0.59463,
      0.18284,
      1.11635,
      0.96408,
      0.69139]}
  F2_n2b {val:0.00422}
  F2_n2w[1..20] {val:[0.13990,
      0.11062,
      0.09972,
      -0.27680,
      0.08333,
      0.05888,
      -0.27064,
      0.09264,
      0.14157,
      0.26756,
      -0.20720,
      -0.16421,
      0.08614,
      0.01694,
      0.29355,
      -0.33601,
      0.10427,
      0.15610,
      0.00076,
      0.07830]}
HISTORY o2 {dflt:0}
INIT
  F1_w1[1..20] := 0
  F1_b1[1..20] := 0
  F1_th[1..20] := 0
  F1_w2[1..20] := 0
  F2_w1[1..20] := 0
  F2_b1[1..20] := 0
  F2_th[1..20] := 0
  F2_w2[1..20] := 0
  o1 := 0
  o3 := 0
ENDINIT
EXEC
-- F1 block
  F1_w1[1..20] := i1 * F1_n0w[1..20]
  F1_b1[1..20] := F1_w1[1..20] + F1_n0b[1..20]
  F1_th[1..20] := tanh(F1_b1[1..20])
  FOR i:=1 to 20 DO F1_w2[i] := F1_th[i] * F1_n2w[i] ENDFOR
  o1 := F1_n2b
  FOR i:=1 to 20 DO o1 := o1 + F1_w2[i] ENDFOR
-- G1 block
  czfun(o2/o1) :=
 (G1_b[1]|z0+
      G1_b[2]|z-1+
      G1_b[3]|z-2+
      G1_b[4]|z-3+
      G1_b[5]|z-4+
      G1_b[6]|z-5+
      G1_b[7]|z-6+
      G1_b[8]|z-7)
  /
 (G1_a[1]|z0+
      G1_a[2]|z-1+
      G1_a[3]|z-2+
      G1_a[4]|z-3+
      G1_a[5]|z-4+
      G1_a[6]|z-5+
      G1_a[7]|z-6+
      G1_a[8]|z-7+
      G1_a[9]|z-8)
-- F2 block
  F2_w1[1..20] := o2 * F2_n0w[1..20]
  F2_b1[1..20] := F2_w1[1..20] + F2_n0b[1..20]
  F2_th[1..20] := tanh(F2_b1[1..20])
  FOR i:=1 to 20 DO F2_w2[i] := F2_th[i] * F2_n2w[i] ENDFOR
  o3 := F2_n2b
  FOR i:=1 to 20 DO o3 := o3 + F2_w2[i] ENDFOR
ENDEXEC
ENDMODEL
